{"version":3,"sources":["pages/hospitalCode/index.module.scss","util/request.ts","service/baseURL.ts","pages/hospitalCode/HospitalSearch.tsx","service/hospitalCode.ts","pages/hospitalCode/index.tsx"],"names":["module","exports","input","input-explain","input-error","hospitalNameClass","hospitalAddressClass","axios","defaults","baseURL","rq","create","timeout","withCredentials","transformRequest","data","ret","it","encodeURIComponent","interceptors","request","use","config","error","Promise","reject","response","res","status","message","warning","window","location","href","url","name","get","post","Search","HospitalSearch","props","_useState","useState","_useState2","Object","slicedToArray","validateInput","setValidateInput","getData","handleSearch","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","val","dataSource","wrap","_context","prev","next","hospitalName","then","i","length","key","sent","abrupt","stop","_x","apply","this","arguments","react_default","createElement","className","style","placeholder","onSearch","allowClear","enterButton","autoComplete","onChange","e","target","value","HospitalCode","tableData","setTableData","useEffect","Fragment","hospitalCode_HospitalSearch","info","table","bordered","size","locale","emptyText","columns","title","dataIndex"],"mappings":"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","file":"static/js/4.4072435b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"hospitalCode_input__2CrA9\",\"input-explain\":\"hospitalCode_input-explain__2WN9D\",\"input-error\":\"hospitalCode_input-error__1L9vh\",\"hospitalNameClass\":\"hospitalCode_hospitalNameClass__3EMrd\",\"hospitalAddressClass\":\"hospitalCode_hospitalAddressClass__3T6mv\"};","import { message } from 'antd';\nimport axios from 'axios';\n\n// 全局默认设置\naxios.defaults.baseURL = '';\n\n// 创建实例\nlet rq = axios.create({\n  timeout: 5000,\n  withCredentials: true,\n  transformRequest: [ data => {\n    let ret = '';\n    for (let it in data) {\n      ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&';\n    }\n    return ret;\n  }]\n});\n\n// 全局拦截器\nrq.interceptors.request.use(\n  (config) => {\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\nrq.interceptors.response.use(\n  (res) => {\n    let { data } = res;\n    // 登录过期\n    if (data.status === 1001) {\n      message.warning('登录失效，请重新登录', () => {\n        window.location.href = data.data.url;\n      });\n    }\n    return res;\n  },\n  (error) => {\n    message.error(error.name);\n    return Promise.reject(error);\n  }\n);\n\nlet get = rq.get;\nlet post = rq.post;\n\nexport { get, post };\n","let baseURL = '';\nif (process.env.NODE_ENV === 'development') {\n  baseURL = '/api/';\n} else {\n  baseURL = '/api/';\n}\nexport default baseURL;\n","import { Input } from 'antd';\nimport React, { useState } from 'react';\nimport { getHospitalDetail } from '../../service/hospitalCode';\nimport style from './index.module.scss';\nimport { hospitalProps } from './interface';\nconst Search = Input.Search;\nconst HospitalSearch = (props: hospitalProps) => {\n  let [validateInput, setValidateInput] = useState(0);\n  let { getData } = props;\n  let handleChange = (e: any) => {\n    let val = e.target.value;\n    if (!val) {\n      setValidateInput(1);\n      return;\n    }\n    setValidateInput(0);\n  };\n  let handleSearch = async (val: string) => {\n    if (validateInput === 0) {\n      let dataSource = await getHospitalDetail(val);\n      getData(dataSource);\n    } else {\n      return;\n    }\n  };\n  return (\n    <div className={style.input}>\n      <Search\n        placeholder=\"请输入医院名称\"\n        onSearch={handleSearch}\n        allowClear={true}\n        enterButton\n        autoComplete=\"off\"\n        onChange={handleChange}\n        className={validateInput === 0 ? '' : 'has-error'}\n      />\n      <div\n        className={style['input-explain'] + ' ' + (validateInput === 1 ? style['input-error'] : '')}\n      >\n        医院名称不能为空\n      </div>\n    </div>\n  );\n};\nexport default HospitalSearch;\n","import { AxiosPromise } from 'axios';\nimport { get,post } from '../util/request';\nimport baseURL from './baseURL';\n\nexport let getHospitalDetail = (hospitalName: string): AxiosPromise<any> => {\n  let url = baseURL + '/hospital';\n  return post(url, { hospitalName }).then((res) => {\n    for(let i = 0;i<res.data.data.length;i++){\n      res.data.data[i].key = i;\n    }\n    return res.data.data;\n  });\n};\n\nexport let getAllHospitalDetail = (): AxiosPromise<any> => {\n  let url = baseURL + '/hospital/all';\n  return get(url).then((res) => {\n    for(let i = 0;i<res.data.data.length;i++){\n      res.data.data[i].key = i;\n    }\n    return res.data.data;\n  });\n};\n","import { message, Table } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { getAllHospitalDetail } from '../../service/hospitalCode';\nimport HospitalSearch from './HospitalSearch';\nimport './index.less';\nimport { hospitalProps } from './interface.d';\nconst HospitalCode = (props: hospitalProps) => {\n  const [tableData, setTableData] = useState();\n  useEffect(() => {\n    getAllHospitalDetail().then((dataSource) => {\n      setTableData(dataSource);\n    });\n  }, []);\n  const columns = [\n    { title: '编码', dataIndex: 'hospitalCode', key: 'code' },\n    {\n      title: '医院名称',\n      dataIndex: 'hospitalName',\n      key: 'hospitalName',\n      className: 'hospitalNameClass'\n    },\n    { title: '所属区县', dataIndex: 'county', key: 'county' },\n    { title: '医院类别', dataIndex: 'type', key: 'type' },\n    { title: '医院等级', dataIndex: 'level', key: 'level' },\n    { title: '医院地址', dataIndex: 'address', key: 'address', className: 'hospitalAddressClass' }\n  ];\n  let getHospitalDetail = (dataSource: any) => {\n    if (dataSource.length === 0) {\n      message.info('未查询到医院信息', 0.8);\n    }\n    setTableData(dataSource);\n  };\n  return (\n    <React.Fragment>\n      <HospitalSearch getData={getHospitalDetail} />\n      <Table\n        bordered={true}\n        size=\"middle\"\n        locale={{ emptyText: '暂无医院信息' }}\n        columns={columns}\n        dataSource={tableData}\n      />\n    </React.Fragment>\n  );\n};\nexport default HospitalCode;\n"],"sourceRoot":""}